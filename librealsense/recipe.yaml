context:
  name: librealsense
  version: 2.55.1
  

package:
  name: ${{ name }}
  version: ${{ version }}

source:
  - url: https://github.com/IntelRealSense/librealsense/archive/v{{ version }}.tar.gz
    sha256: e3a767337ff40ae41000049a490ab84bd70b00cbfef65e8cdbadf17fd2e1e5a8
    patches:
      - fix_macos_arm64.patch
      - fix_ppc64le.patch  # [ppc64le]

build:
  script: build-librealsense.sh

requirements:
  build:
    - python
    - if: build_platform != target_platform
      then: cross-python_${{ target_platform }}
    - ${{ compiler('c') }}
    - ${{ compiler('cxx') }}
    - cmake
    - ninja
    - libudev
    - ${{ stdlib('c') }}
  host:
    - python
    - numpy
    - libudev
    - libusb
  run:
    - ${{ pin_compatible('numpy') }}

tests:
  - python:
      imports:
        - pyrealsense2

about:
  homepage: https://github.com/IntelRealSense/librealsense
  license: Apache-2.0
  license_file: LICENSE
  summary: Cross-platform library for Intel® RealSense™ depth and tracking cameras.

extra:
  recipe-maintainers:
    - traversaro